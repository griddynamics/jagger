<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Jagger: Load generating modes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Jagger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<link href="tab-panel.css" rel="stylesheet" type="text/css">
  <script language="type="text/javascript"JavaScript" type="text/javascript" src="tab-panel.js">
  </script></head>
</head>
<body onload="bodyOnLoad()" onresize="raisePanel(currentMenuIndex)">
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ComponentsLoadGenExecutionModes.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Load generating modes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Section describes different load generation configurations of the framework <br/>
</p>
<ul>
<li><a class="el" href="ComponentsLoadGenExecutionModes.html#section_components_exec_load_gen_simple">Simplest configuration</a> </li>
<li><a class="el" href="ComponentsLoadGenExecutionModes.html#section_components_exec_load_gen_default">Default configuration</a> </li>
<li><a class="el" href="ComponentsLoadGenExecutionModes.html#section_components_exec_load_distributed">Distributed configuration</a> </li>
<li><a class="el" href="ComponentsLoadGenExecutionModes.html#section_components_exec_load_distributed_run">Run framework in the distributed configuration</a> </li>
<li><a class="el" href="ComponentsLoadGenExecutionModes.html#section_components_exec_load_distributed_run_details">Distributed configuration test flow</a></li>
</ul>
<p><a class="el" href="JaggerProperties.html">Configuration of the framework</a> is provided via property files or system properties <br/>
</p>
<h1><a class="anchor" id="section_components_exec_load_gen_simple"></a>
Simplest configuration</h1>
<p>In the simplest configuration you can launch framework as a single JVM </p>
<ul>
<li><a class="el" href="Installation.html#section_installation_local">download java archetype</a> </li>
<li><a class="el" href="JaggerProperties.html#section_jagger_properties">configure `environment.properties` file in the java project to use H2 DB</a> </li>
<li><a class="el" href="GettingStarted.html#section_getting_started_run">compile and run test project</a></li>
</ul>
<p>In this case all load generating components are executed in a single JVM. You will collect <a class="el" href="MetricsPerformance.html">standard performance metrics</a>. Pdf report will be generated at the end of the test execution <br/>
 </p>
<div class="image">
<img src="components_simple.png" alt="components_simple.png"/>
<div class="caption">
Simplest configuration of the test framework</div></div>
 <h1><a class="anchor" id="section_components_exec_load_gen_default"></a>
Default configuration</h1>
<p>After running <a class="el" href="Installation.html#section_installation_local">local installation</a>, you will get default framework configuration, like shown in the image below. <br/>
 In this case </p>
<ul>
<li>Results storage and representation components are always running in the docker containers </li>
<li>When you <a class="el" href="GettingStarted.html#section_getting_started_run">compile and run test project</a>, all load generating components are executed in a single JVM. During test run all results are collected in the test results DB. Later you can access results via <a class="el" href="WebUiMain.html">web interface</a> or <a class="el" href="JaasMain.html">REST API</a>. RESP API also allows to download pdf report. </li>
<li>Optionally: you can start one or many monitoring agents to <a class="el" href="MonitoringMain.html">collect system and JVM metrics</a>. All monitoring metrics will be also stored in the results DB </li>
<li>Optionally: via <a class="el" href="JaggerProperties.html#section_jagger_properties">jagger properties</a> you can enable communication between load generating components and JaaS. In this case you will be able to <a class="el" href="ComponentsControlExecModes.html#section_components_exec_control_stand_by">submit and start new test project to already running load generating components via REST API</a></li>
</ul>
<div class="image">
<img src="components_default.png" alt="components_default.png"/>
<div class="caption">
Default configuration of the test framework</div></div>
 <h1><a class="anchor" id="section_components_exec_load_distributed"></a>
Distributed configuration</h1>
<p>In case when single node is not enough to generate enough load, or you would like to load your system from different nodes/locations, you can run framework in the distributed mode. <br/>
 <br/>
 In distributed mode, load generators (Kernels) are started as separate java applications on the single or multiple nodes. Kernels are responsible for communication with the SUT, with monitoring agents and for temporary storage of the <a class="el" href="MetricsMain.html">raw test results</a>. <br/>
 <br/>
 Master/Coordinator is started in it's own JVM and is responsible for load balancing between Kernels, communication with JaaS, final results aggregation and storage in the results DB. <br/>
 In this case </p>
<ul>
<li>Results storage and representation components are always running </li>
<li><a class="el" href="ComponentsLoadGenExecutionModes.html#section_components_exec_load_distributed_run">Run framework in the distributed configuration</a> </li>
<li>During test run all results are collected in the test results DB. Later you can access results via <a class="el" href="WebUiMain.html">web interface</a> or <a class="el" href="JaasMain.html">REST API</a>. RESP API also allows to download pdf report. </li>
<li>Optionally: you can start one or many monitoring agents to <a class="el" href="MonitoringMain.html">collect system and JVM metrics</a>. All monitoring metrics will be also stored in the results DB </li>
<li>Optionally: via <a class="el" href="JaggerProperties.html#section_jagger_properties">jagger properties</a> you can enable communication between load generating components and JaaS. In this case you will be able to <a class="el" href="ComponentsControlExecModes.html#section_components_exec_control_stand_by">submit and start new test project to already running load generating components via REST API</a></li>
</ul>
<div class="image">
<img src="components_distributed.png" alt="components_distributed.png"/>
<div class="caption">
Distributed configuration of the test framework</div></div>
 <h1><a class="anchor" id="section_components_exec_load_distributed_run"></a>
Run framework in the distributed configuration</h1>
<p>Already in the single node mode Jagger framework is capable of producing high load: thousands of virtual users with thousands of transactions per seconds. Usually these numbers are limited by the system resources <br/>
 When such load is not enough, you can run framework in the distributed mode on multiple nodes like on the image below <br/>
</p>
<div class="image">
<img src="execution_distributed_mode.png" alt="execution_distributed_mode.png"/>
<div class="caption">
Execution in the distributed mode</div></div>
<p> Next roles are available in the distributed mode:</p>
<ul>
<li>one instance with Master/Coordinator role</li>
<li>one or multiple instances with Kernel role</li>
</ul>
<p>Master doesn't have information about Kernels that will do workload before its start. Kernel has an address of Master/Coordinator <code>chassis.coordinator.zookeeper.endpoint</code> in it's config and registers on Master/Coordinator after start. Master/Coordinator gets the list of registered Kernels and distributes tasks for execution among them. Report with execution results is available on Master after execution finished. <br/>
 <br/>
 In order to start Jagger in the distributed mode. </p>
<ul>
<li>Start Kernel(s) <div class="fragment"><div class="line">./start.sh profiles/basic/environment.properties</div>
<div class="line">-Dchassis.roles=KERNEL</div>
<div class="line">-Dchassis.coordination.bean=zookeeperCoordinator</div>
<div class="line">-Dchassis.coordinator.zookeeper.endpoint={master/coordinator host}:2181</div>
<div class="line">-Dchassis.storage.fs.default.name=hdfs:<span class="comment">//{master/coordinator host}/</span></div>
<div class="line">-Dchassis.workspace=./jaggerworkspace/server</div>
</div><!-- fragment --> </li>
<li>Start Master In our case we will have one Kernels and one monitoring agent. Number of kernels and agents is not limited <div class="fragment"><div class="line">./start.sh profiles/basic/environment.properties</div>
<div class="line">-Dchassis.roles=MASTER,COORDINATION_SERVER,HTTP_COORDINATION_SERVER</div>
<div class="line">-Dchassis.conditions.monitoring.enable=<span class="keyword">true</span></div>
<div class="line">-Dchassis.conditions.min.agents.count=1</div>
<div class="line">-Dchassis.conditions.min.kernels.count=1</div>
<div class="line">-Dchassis.coordination.bean=zookeeperCoordinator</div>
<div class="line">-Dchassis.coordinator.zookeeper.endpoint={master/coordinator host}:2181</div>
<div class="line">-Dchassis.log.storage.bean=hdfsStorage</div>
<div class="line">-Dchassis.storage.fs.default.name=hdfs:<span class="comment">//{master/coordinator host}/</span></div>
<div class="line">-Dchassis.workspace=./jaggerworkspace/server</div>
</div><!-- fragment --> </li>
<li>Start Agent <div class="fragment"><div class="line">./start_agent.sh</div>
<div class="line">-Dchassis.coordination.http.url=http:<span class="comment">//{master/coordinator host}:8089</span></div>
<div class="line">-Djmx.enabled=<span class="keyword">false</span> -Dagent.name=agentName</div>
</div><!-- fragment --></li>
</ul>
<p>You can start Master, Kernel, Agent nodes in any order <br/>
 Please remove <code>./jaggerworkspace</code> folder in the directory if exists before starting nodes <br/>
 Information about mentioned properties you can find in the <a class="el" href="JaggerProperties.html#section_jagger_properties">Jagger configuration</a> chapter <br/>
 <br/>
 We are recommending to use <a class="el" href="CIMain.html#section_ci_jagger_deploy_plugin">Jenkins deployment plugin</a> to start framework in the distributed mode in CI</p>
<h1><a class="anchor" id="section_components_exec_load_distributed_run_details"></a>
Distributed configuration test flow</h1>
<div class="image">
<img src="execution_distributed_mode_details.png" alt="execution_distributed_mode_details.png"/>
<div class="caption">
Distributed configuration test flow</div></div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="FrameworkComponents.html">Components and execution modes</a></li><li class="navelem"><a class="el" href="ComponentsExecutionModes.html">Framework execution modes</a></li>
    <li class="footer">Generated on Thu Jan 12 2017 18:19:09 for Jagger by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
